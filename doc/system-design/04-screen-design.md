# 4. 画面設計

## 4.1 画面一覧

### 4.1.1 認証関連
1. ログイン画面 (`/login`)
2. ユーザー登録画面 (`/register`)
3. パスワードリセット画面 (`/forgot-password`)
4. パスワード再設定画面 (`/reset-password/:token`)

### 4.1.2 ダッシュボード
5. ホームダッシュボード (`/`)
6. プロジェクトダッシュボード (`/projects/:id/dashboard`)

### 4.1.3 プロジェクト管理
7. プロジェクト一覧 (`/projects`)
8. プロジェクト作成 (`/projects/new`)
9. プロジェクト設定 (`/projects/:id/settings`)
10. プロジェクトメンバー管理 (`/projects/:id/members`)

### 4.1.4 タスク管理
11. タスク一覧 (`/projects/:id/tasks`)
12. タスク詳細 (`/tasks/:id`)
13. タスク作成モーダル
14. タスク編集モーダル

### 4.1.5 ユーザー設定
15. プロフィール設定 (`/settings/profile`)
16. 通知設定 (`/settings/notifications`)
17. セキュリティ設定 (`/settings/security`)

### 4.1.6 その他
18. 通知一覧 (`/notifications`)
19. 404エラーページ
20. 500エラーページ

## 4.2 画面遷移図

```
┌─────────────┐
│   ログイン   │ ←─────────────┐
└──────┬──────┘              │
       │                      │
       ▼                      │
┌─────────────┐              │
│    ホーム    │ ──ログアウト──┘
└──────┬──────┘
       │
       ├─────────────────────────────────┐
       │                                 │
       ▼                                 ▼
┌─────────────┐                 ┌──────────────┐
│プロジェクト  │ ───選択────────▶│  タスク一覧   │
│    一覧     │                 └───────┬──────┘
└──────┬──────┘                         │
       │                                 ▼
       │                         ┌──────────────┐
       │                         │  タスク詳細   │
       │                         └──────────────┘
       ▼
┌─────────────┐
│ユーザー設定  │
└─────────────┘
```

## 4.3 画面レイアウト

### 4.3.1 基本レイアウト構成
```
┌─────────────────────────────────────────────────┐
│                  ヘッダー                        │
├─────────────┬───────────────────────────────────┤
│             │                                   │
│             │                                   │
│  サイドバー  │          メインコンテンツ          │
│             │                                   │
│             │                                   │
└─────────────┴───────────────────────────────────┘
```

### 4.3.2 レスポンシブ対応
- **デスクトップ** (1024px以上): サイドバー固定表示
- **タブレット** (768px-1023px): サイドバー折りたたみ可能
- **モバイル** (767px以下): ハンバーガーメニュー

## 4.4 主要画面の詳細設計

### 4.4.1 ログイン画面
```
┌─────────────────────────────────────────┐
│                                         │
│            [ロゴ] TaskFlow              │
│                                         │
│         ┌─────────────────────┐        │
│         │ メールアドレス        │        │
│         └─────────────────────┘        │
│                                         │
│         ┌─────────────────────┐        │
│         │ パスワード           │        │
│         └─────────────────────┘        │
│                                         │
│         □ ログイン状態を保持する         │
│                                         │
│         [      ログイン       ]         │
│                                         │
│         パスワードをお忘れですか？        │
│         アカウントをお持ちでない方       │
│                                         │
└─────────────────────────────────────────┘
```

### 4.4.2 ホームダッシュボード
```
┌─────────────────────────────────────────────────┐
│ [≡] TaskFlow    [🔍]         [🔔] [👤]          │
├─────────────┬───────────────────────────────────┤
│             │                                   │
│ ⌂ ホーム     │  今日のタスク                    │
│             │  ┌─────────────────────────┐    │
│ 📁 プロジェクト│  │ □ レポート作成 (高)      │    │
│             │  │ □ ミーティング準備        │    │
│ ⚙️ 設定      │  │ ✓ メール返信            │    │
│             │  └─────────────────────────┘    │
│             │                                   │
│             │  進捗状況                         │
│             │  [========== 60% =====    ]      │
│             │                                   │
│             │  最近のアクティビティ              │
│             │  • 田中さんがコメントしました      │
│             │  • 新しいタスクが割り当てられました │
│             │                                   │
└─────────────┴───────────────────────────────────┘
```

### 4.4.3 タスク一覧画面
```
┌─────────────────────────────────────────────────┐
│ [≡] TaskFlow > プロジェクトA                     │
├─────────────┬───────────────────────────────────┤
│             │ [+ 新規タスク] [フィルタ] [並び替え]│
│ 📊 ダッシュボード│                                │
│             │ ┌─────┬─────┬─────┐            │
│ 📝 タスク    │ │ 未着手│進行中│ 完了 │            │
│             │ ├─────┼─────┼─────┤            │
│ 👥 メンバー  │ │     │     │     │            │
│             │ │ Task1│Task3│Task5│            │
│ ⚙️ 設定      │ │     │     │     │            │
│             │ │ Task2│Task4│Task6│            │
│             │ │     │     │     │            │
│             │ │ [+]  │ [+] │     │            │
│             │ └─────┴─────┴─────┘            │
└─────────────┴───────────────────────────────────┘
```

### 4.4.4 タスク詳細モーダル
```
┌─────────────────────────────────────────────[×]─┐
│                                                  │
│  タスクタイトル                          [編集]   │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│                                                  │
│  ステータス: [進行中 ▼]    優先度: [高 ▼]        │
│                                                  │
│  担当者: [👤 田中太郎 ▼]                        │
│                                                  │
│  期限: [2024/01/31]                             │
│                                                  │
│  ラベル: [バグ] [緊急] [+]                      │
│                                                  │
│  説明:                                          │
│  ┌──────────────────────────────────────┐     │
│  │ タスクの詳細説明をここに記載...         │     │
│  │                                        │     │
│  └──────────────────────────────────────┘     │
│                                                  │
│  添付ファイル: [📎 ファイルを選択]                │
│                                                  │
│  コメント:                                       │
│  ┌──────────────────────────────────────┐     │
│  │ コメントを入力...                      │     │
│  └──────────────────────────────────────┘     │
│                                [投稿]           │
│                                                  │
│  ▼ 活動履歴                                     │
│  • 10:30 田中さんがステータスを変更しました       │
│  • 09:15 山田さんがコメントしました              │
│                                                  │
└──────────────────────────────────────────────────┘
```

## 4.5 コンポーネント設計

### 4.5.1 共通コンポーネント
```typescript
// ヘッダーコンポーネント
interface HeaderProps {
  user: User;
  notificationCount: number;
}

// サイドバーコンポーネント
interface SidebarProps {
  projects: Project[];
  currentProjectId?: string;
}

// タスクカードコンポーネント
interface TaskCardProps {
  task: Task;
  onEdit: (task: Task) => void;
  onStatusChange: (taskId: string, status: string) => void;
}

// ユーザーアバターコンポーネント
interface AvatarProps {
  user: User;
  size?: 'small' | 'medium' | 'large';
}
```

### 4.5.2 フォームコンポーネント
```typescript
// タスクフォーム
interface TaskFormProps {
  task?: Task;
  projectId: string;
  onSubmit: (data: TaskFormData) => void;
  onCancel: () => void;
}

// プロジェクトフォーム
interface ProjectFormProps {
  project?: Project;
  onSubmit: (data: ProjectFormData) => void;
}
```

## 4.6 UIパターン

### 4.6.1 フォームバリデーション
- リアルタイムバリデーション
- エラーメッセージの即時表示
- 送信ボタンの無効化制御

### 4.6.2 ローディング状態
- スケルトンスクリーン
- スピナー表示
- プログレスバー

### 4.6.3 空状態
- イラストレーション付きメッセージ
- アクションボタンの配置
- ヘルプテキスト

### 4.6.4 エラー状態
- エラーメッセージの表示
- リトライボタン
- サポート連絡先

## 4.7 アクセシビリティ対応

### 4.7.1 キーボード操作
- Tabキーでのフォーカス移動
- Enterキーでの決定
- Escキーでのキャンセル
- 矢印キーでのリスト操作

### 4.7.2 スクリーンリーダー対応
- 適切なARIAラベル
- セマンティックHTML
- フォーカス管理

### 4.7.3 カラーコントラスト
- WCAG AA基準準拠
- 最小コントラスト比 4.5:1
- 大きなテキストは 3:1

## 4.8 デザイントークン

### 4.8.1 カラーパレット
```css
/* Primary Colors */
--color-primary: #1976d2;
--color-primary-light: #42a5f5;
--color-primary-dark: #1565c0;

/* Status Colors */
--color-success: #4caf50;
--color-warning: #ff9800;
--color-error: #f44336;
--color-info: #2196f3;

/* Neutral Colors */
--color-gray-50: #fafafa;
--color-gray-100: #f5f5f5;
--color-gray-200: #eeeeee;
--color-gray-300: #e0e0e0;
--color-gray-400: #bdbdbd;
--color-gray-500: #9e9e9e;
--color-gray-600: #757575;
--color-gray-700: #616161;
--color-gray-800: #424242;
--color-gray-900: #212121;
```

### 4.8.2 タイポグラフィ
```css
/* Font Sizes */
--font-size-xs: 12px;
--font-size-sm: 14px;
--font-size-base: 16px;
--font-size-lg: 18px;
--font-size-xl: 20px;
--font-size-2xl: 24px;
--font-size-3xl: 30px;

/* Font Weights */
--font-weight-normal: 400;
--font-weight-medium: 500;
--font-weight-semibold: 600;
--font-weight-bold: 700;
```

### 4.8.3 スペーシング
```css
/* Spacing Scale */
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
--spacing-2xl: 48px;
--spacing-3xl: 64px;
```