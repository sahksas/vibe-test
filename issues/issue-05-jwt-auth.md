# JWT認証システムの実装

## 概要
JWTベースの認証システムを実装し、アクセストークンとリフレッシュトークンによる安全な認証機構を構築します。

## 詳細仕様
### トークン管理
- アクセストークン（有効期限: 15分）
- リフレッシュトークン（有効期限: 7日）
- トークンのペイロードにユーザーID、ロール情報を含める
- RS256アルゴリズムによる署名（本番環境）

### Redis実装
- リフレッシュトークンの保存
- ブラックリスト管理（ログアウト時）
- セッション情報のキャッシュ

### ミドルウェア実装
- 認証ミドルウェア（authenticateToken）
- 権限チェックミドルウェア（authorizeRole）
- トークン自動更新ミドルウェア

### セキュリティ対策
- トークンのHttpOnly Cookie保存
- CSRF対策の実装
- レート制限の実装
- ログイン試行回数制限（5回失敗で30分ロック）

## 受け入れ条件
- [ ] アクセストークンの生成・検証が正常に動作する
- [ ] リフレッシュトークンによるトークン更新が動作する
- [ ] トークンの有効期限切れが正しく処理される
- [ ] ログアウト時にトークンが無効化される
- [ ] 認証が必要なエンドポイントが保護される
- [ ] レート制限が機能する
- [ ] ログイン試行制限が機能する

## 技術的考慮事項
- jsonwebtokenライブラリの使用
- 環境変数でシークレットキーを管理
- トークンのローテーション戦略
- 同時ログインセッション数の制限を検討

## 依存関係
- 前提Issue: #2, #3
- ブロックしているIssue: #6, #7, #9

## 見積もり工数
2日